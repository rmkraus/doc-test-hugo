{{/* Custom header content for Relearn theme */}}
{{/* This file is automatically included by the Relearn theme in the head section */}}

{{/* Jupyter Notebook Assets */}}
{{/* Include notebook.js library */}}
<script src="{{ .Site.BaseURL }}/js/notebook.min.js"></script>

{{/* Include Jupyter notebook styles */}}
<link rel="stylesheet" href="{{ .Site.BaseURL }}/css/jupyter.css">

{{/* Optional: Include marked for Markdown rendering */}}
<script src="https://cdn.jsdelivr.net/npm/marked@4.3.0/marked.min.js"></script>

{{/* Optional: Include DOMPurify for HTML sanitization */}}
<script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.5/dist/purify.min.js"></script>

{{/* Optional: Include Prism.js for syntax highlighting */}}
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

<script>
// Configure notebook.js with optional dependencies
document.addEventListener('DOMContentLoaded', function() {
  if (typeof nb !== 'undefined') {
    // Set up Markdown renderer if marked is available
    if (typeof marked !== 'undefined') {
      nb.markdown = function(text) {
        return marked.parse(text);
      };
    }

    // Set up HTML sanitizer if DOMPurify is available
    if (typeof DOMPurify !== 'undefined') {
      nb.sanitizer = function(html) {
        return DOMPurify.sanitize(html);
      };
    }

    // Set up syntax highlighter if Prism is available
    if (typeof Prism !== 'undefined') {
      nb.highlighter = function(text, pre, code, lang) {
        if (code && lang && Prism.languages[lang]) {
          pre.className = 'language-' + lang;
          code.className = 'language-' + lang;
          return Prism.highlight(text, Prism.languages[lang], lang);
        }
        return text;
      };
    }
  }

  // Add event listener for post-processing rendered notebooks
  document.addEventListener('notebookRendered', function(event) {
    const container = event.detail.container;

    // Apply syntax highlighting to any code blocks that weren't caught
    if (typeof Prism !== 'undefined') {
      Prism.highlightAllUnder(container);
    }
  });
});
</script>